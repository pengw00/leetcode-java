package com.tutorialspoint;

import java.util.ArrayList;

public class ArrayListDemo {
    public static int maxProfit(int k, int[] prices) {
        if(k==0 || prices == null || prices.length ==0)
            return 0;
        if(k>= prices.length/2)
            return calcProfit(prices);
        
        int[][] dp = new int[k+1][prices.length];
      
        for(int transNo =1; transNo<=k ;transNo++){
            int maxProfitBeforeSell = Integer.MIN_VALUE;
            for(int day = 1; day<prices.length; day++){
                int profitOnPrevDay = dp[transNo][day-1];
                System.out.println("dp[" + transNo + "][" + (day-1) + "]" + "=:" + profitOnPrevDay);
                int maxProfit = Integer.MIN_VALUE;
                System.out.println("maxProfitBeforeSell:" + maxProfitBeforeSell);
                maxProfitBeforeSell = Math.max(maxProfitBeforeSell, dp[transNo-1][day-1]-prices[day-1]);
                System.out.println("dp[" + (transNo-1) + "][" + (day-1) + "]" + "=:" + dp[transNo-1][day-1]);
                System.out.println("maxProfitBeforeSell:" + maxProfitBeforeSell);
                //System.out.println("maxProfitBeforeSell:" + maxProfitBeforeSell);
                System.out.println("profitOnPrevDay:" + profitOnPrevDay);
                dp[transNo][day] = Math.max(profitOnPrevDay, maxProfitBeforeSell+prices[day]);
                System.out.println("dp[" + transNo + "][" + (day) + "]" + "=:" + profitOnPrevDay);
            }
        }
        
        return dp[k][prices.length-1];
    }
    private static int calcProfit(int[] prices) {
        int len = prices.length, profit = 0;
        for (int i = 1; i < len; i++)
            if (prices[i] > prices[i - 1]) profit += prices[i] - prices[i - 1];
        return profit;
    }
   public static void main(String[] args) {
      
      // create an empty array list with an initial capacity
      //ArrayList<Integer> arrlist = new ArrayList<Integer>(5);
      int[] prices = {3,2,6,5,0,3};
      int k = 2;
      int res = 0;
      res = maxProfit(k,prices);
      
      System.out.println("maxprofit is = " + res);
      // use add() method to add elements in the list
      //arrlist.add(15);
      //arrlist.add(22);
      //arrlist.add(30);
      //arrlist.add(40);

      // let us print all the elements available in list
      //for (Integer number : arrlist) {
        //System.out.println("Number = " + number);
      //} 
      
      // retrieves element at 4th postion
      //int retval=arrlist.get(3);
      //System.out.println("Retrieved element is = " + retval);	   
   }
}
